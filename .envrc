# -*- sh -*-

# Get the Nix commit ID from the pinning file:
commit=$(sed -nE 's/^[[:space:]]+commit[[:space:]]+=[[:space:]]+"([a-z0-9]+).*$/\1/p' nix/nixpkgs.nix)
export NIX_PATH=nixpkgs="https://github.com/NixOS/nixpkgs/tarball/${commit}"

# Load in the shell.nix file:
use nix

# Reload if these files changes:
watch_file edify.cabal default.nix
